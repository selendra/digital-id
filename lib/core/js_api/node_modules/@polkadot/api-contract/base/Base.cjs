"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Base = void 0;

var _util = require("@polkadot/util");

var _index = require("../Abi/index.cjs");

// Copyright 2017-2021 @polkadot/api authors & contributors
// SPDX-License-Identifier: Apache-2.0
class Base {
  constructor(api, abi, decorateMethod) {
    this.abi = void 0;
    this.api = void 0;
    this._decorateMethod = void 0;
    this.abi = abi instanceof _index.Abi ? abi : new _index.Abi(abi, api.registry.getChainProperties());
    this.api = api;
    this._decorateMethod = decorateMethod;
    (0, _util.assert)(!!(api && api.isConnected && api.tx), 'Your API has not been initialized correctly and is not connected to a chain');
    (0, _util.assert)(!!(api.tx.contracts && Object.keys(api.tx.contracts).length), 'You need to connect to a chain with a runtime that supports contracts');
    (0, _util.assert)((0, _util.isFunction)(api.tx.contracts.instantiateWithCode), 'You need to connect to a chain with a runtime with a V3 contracts module. The runtime does not expose api.tx.contracts.instantiateWithCode');
  }

  get registry() {
    return this.api.registry;
  }

}

exports.Base = Base;